<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:fragment="head(title)">
    <meta charset="UTF-8">
    <title th:text="*{title}">Posts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
            crossorigin="anonymous"></script>
</head>

<nav th:fragment="navbar" class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
        <a class="navbar-brand" href="#" th:text="#{posts.logo}">CA Blog</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">


            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" th:href="@{/posts/create}" th:text="#{posts.create.new}"></a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" th:href="@{/posts/user}" th:text="#{posts.signin}"></a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" th:href="@{/posts/user}" th:text="#{posts.register}"></a>
                </li>

                <li th:replace="this :: language"></li>
            </ul>

        </div>
    </div>
</nav>

<li th:fragment="language" class="nav-item dropdown" id="languageSelector">
    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
       data-bs-toggle="dropdown" aria-expanded="false" th:text="#{lang.lang}">
    </a>
    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
        <li><a class="dropdown-item" th:href="${{#httpServletRequest.requestURI}} + '?lang=UK'"
               th:text="#{lang.en}"></a></li>
        <li><a class="dropdown-item" th:href="${{#httpServletRequest.requestURI}} + '?lang=LTU'"
               th:text="#{lang.lt}"></a></li>
    </ul>
</li>

<nav th:fragment="navbarForMainMenu(postPage)" class="navbar navbar-expand-lg navbar-light bg-light mt-3">
    <div class="container-fluid">
        <span th:text="#{posts.total(${postPage.totalElements})}"></span>
        <div class="collapse navbar-collapse" id="navbarSupportedContentMainMenu">


            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li th:replace="this :: sort"></li>
            </ul>

        </div>
    </div>
</nav>

<li th:fragment="sort" class="nav-item dropdown" id="sortSelector">
    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownSort" role="button"
       data-bs-toggle="dropdown" aria-expanded="false" th:text="#{sort.sort}">
    </a>
    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
        <li><a class="dropdown-item" th:href="${{#httpServletRequest.requestURI}} + '?lang=UK'"
               th:text="#{lang.en}"></a></li>
        <li><a class="dropdown-item" th:href="${{#httpServletRequest.requestURI}} + '?lang=LTU'"
               th:text="#{lang.lt}"></a></li>
    </ul>
</li>

<ul th:fragment="paging(postPage)" class="pagination my-3 mx-auto">
    <li class="page-item"
        th:classappend="${postsPage.number eq 0 ? 'disabled' : ''}">
        <a class="page-link"
           th:href="@{/posts(page=${postsPage.number} - 1)}"
           th:text="#{posts.previuos}"></a>
    </li>

    <li class="page-item"
        th:each="pageNumber : ${#numbers.sequence(0, postsPage.totalPages - 1)}"
        th:classappend="${pageNumber eq postsPage.number ? 'active' : ''}">
        <a class="page-link" th:href="@{/posts(page=${pageNumber})}" th:text="${pageNumber} + 1">1</a>
    </li>

    <li class="page-item"
        th:classappend="${postsPage.number eq postsPage.totalPages - 1 ? 'disabled' : ''}">
        <a class="page-link"
           th:href="@{/posts(page=${postsPage.number} + 1)}"
           th:text="#{posts.next}"></a>
    </li>
</ul>

<div th:fragment="lastsPosts" class="card mt-3 text-center">
    <div class="card-body">
        <h5 class="card-title">Special title treatment</h5>
        <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
        <a href="#" class="btn btn-primary">Go somewhere</a>
    </div>
</div>

<footer th:fragment="footer" >
    <div th:fragment="footer" class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        Â© 2021 Copyright:
        <a class="text-dark" href="#" th:text="#{footer.link}"></a>
    </div>
</footer>

<div th:fragment="errorsCard(errorMessageText)" class="container text-center mt-5">
    <div class="card">
        <div class="card-body">
            <h1 th:text="*{errorMessageText}"></h1>
            <a class="btn btn-outline-secondary" th:href="@{/posts}" role="button" th:text="#{error.main.page}"></a>
        </div>
    </div>
</div>


</html>